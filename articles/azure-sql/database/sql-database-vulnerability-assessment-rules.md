---
title: Az SQL sebezhetőségi felmérés szabályainak útmutatója
description: A szabályok címeinek és leírásának listája a SQL Server, Azure SQL Database, Azure SQL felügyelt példányhoz és az Azure szinapszis Analytics szolgáltatáshoz
services: sql-database
ms.service: sql-db-mi
ms.subservice: security
ms.topic: reference
author: barmichal
ms.author: mibar
ms.reviewer: vanto
ms.date: 12/14/2020
ms.openlocfilehash: aa14c8e4d22f5eb965e9d7960bced8029b7636ea
ms.sourcegitcommit: cc13f3fc9b8d309986409276b48ffb77953f4458
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 12/14/2020
ms.locfileid: "97401253"
---
# <a name="sql-vulnerability-assessment-rules-reference-guide"></a>Az SQL sebezhetőségi felmérés szabályainak útmutatója
[!INCLUDE[appliesto-sqldb-sqlmi-asa](../includes/appliesto-sqldb-sqlmi-asa.md)]

Ez a cikk a biztonsági rések megjelölésére szolgáló beépített szabályok listáját sorolja fel, és kiemeli az ajánlott eljárásoktól való eltéréseket, például a helytelen konfigurációkat, a túlzott engedélyeket és a nem védett bizalmas adatokat. A szabályok a Microsoft ajánlott eljárásain alapulnak, és olyan biztonsági problémákra összpontosítanak, amelyek a legnagyobb kockázatokat jelentik az adatbázis és értékes adatai számára. Ezek az adatbázis-szintű problémákra, valamint a kiszolgálói szintű biztonsági problémákra, például a kiszolgálói tűzfal beállításaira és a kiszolgálói szintű engedélyekre is kiterjednek. Ezek a szabályok számos, a megfelelőségi szabványoknak megfelelő szabályozási szervtől származó követelményt is jelentenek.

Az adatbázis-ellenőrzések során megjelenő szabályok az SQL-verziótól és a vizsgált platformtól függenek. 

További információ a sebezhetőségi felmérés Azure-beli megvalósításáról: a [sebezhetőségi felmérés megvalósítása](./sql-vulnerability-assessment.md#implement-vulnerability-assessment).

A szabályok változásainak listáját lásd: az [SQL sebezhetőségi felmérési szabályok changelog](sql-database-vulnerability-assessment-rules-changelog.md).

## <a name="rule-categories"></a>Szabálykategóriák

Az SQL sebezhetőségi felmérési szabályok öt kategóriával rendelkeznek, amelyek az alábbi fejezetekben találhatók:

- [Hitelesítés és engedélyezés](#authentication-and-authorization)
- [Naplózás és naplózás](#auditing-and-logging)
- [Adatvédelem](#data-protection)
- [Telepítési frissítések és javítások](#installation-updates-and-patches)
- [Felszíni terület csökkentése](#surface-area-reduction)

<sup>1</sup> **SQL Server 2012 +** a SQL Server 2012-es vagy újabb verziójának összes verziójára hivatkozik.

<sup>2</sup> **SQL Server 2017 +** a SQL Server 2017-es vagy újabb verziójának összes verziójára hivatkozik.

<sup>3</sup> **SQL Server 2016 +** a SQL Server 2016-es vagy újabb verziójának összes verziójára hivatkozik.

## <a name="authentication-and-authorization"></a>Hitelesítés és engedélyezés

|Szabályazonosító  |Szabály címe   |Szabály súlyossága  |Szabály leírása  |Platform  |
|---------|---------|---------|---------|---------|
| VA1017     |Az összes felhasználó (a dbo kivételével) xp_cmdshell végrehajtási engedélyeit vissza kell vonni          |Magas         |A xp_cmdshell kiterjesztett tárolt eljárás elindítja a Windows parancs-rendszerhéjat, és egy karakterláncot továbbít a végrehajtáshoz. Ez a szabály ellenőrzi, hogy az xp_cmdshell kiterjesztett tárolt eljárás végrehajtásához nem tartozik-e olyan felhasználó (a VEZÉRLÉSi kiszolgáló jogosultságával, mint a rendszergazda kiszolgálói szerepkör tagjai).         |<nobr>SQL Server 2012 +<sup>1</sup><nobr/>         |
|VA1020     |Az adatbázis felhasználói VENDÉGe nem lehet egyetlen szerepkör tagja sem          |Magas         |A vendég felhasználó hozzáférést biztosít egy adatbázishoz minden olyan bejelentkezéshez, amely nincs hozzárendelve egy adott adatbázis-felhasználóhoz. Ez a szabály ellenőrzi, hogy nincsenek-e hozzárendelve adatbázis-szerepkörök a vendég felhasználóhoz.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1042     |Az adatbázis tulajdonosi láncolását le kell tiltani az összes adatbázis esetében, a, a `master` `msdb` és a `tempdb`          |Magas         |A több adatbázishoz való tulajdonosi láncolás a tulajdonosi láncolás kiterjesztése, kivéve, ha az adatbázis határán halad át. Ez a szabály ellenőrzi, hogy ez a beállítás az összes adatbázis esetében le van-e tiltva a, a és a kivételével `master` `msdb` `tempdb` . A, a és a esetében a `master` `msdb` `tempdb` több adatbázisbeli tulajdonosi láncolás alapértelmezés szerint engedélyezve van.        |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1043     |A fő VENDÉGnek nem lehet hozzáférése bármely felhasználói adatbázishoz          |Közepes         |A vendég felhasználó hozzáférést biztosít egy adatbázishoz minden olyan bejelentkezéshez, amely nincs hozzárendelve egy adott adatbázis-felhasználóhoz. Ez a szabály ellenőrzi, hogy a vendég felhasználó nem tud-e csatlakozni egyetlen adatbázishoz sem.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance        |
|VA1046     |Az összes SQL-bejelentkezéshez engedélyezni kell CHECK_POLICY          |Alacsony         |CHECK_POLICY a beállítás lehetővé teszi az SQL-bejelentkezések hitelesítését a tartományi házirendben. Ez a szabály ellenőrzi, hogy a CHECK_POLICY beállítás engedélyezve van-e az összes SQL-bejelentkezéshez.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1047     |Az összes SQL-bejelentkezéshez engedélyezni kell a jelszó lejáratának ellenőrzését.          |Alacsony         |A jelszó lejárati házirendjei a jelszó élettartamának kezeléséhez használatosak. Ha SQL Server érvényesíti a jelszó lejáratára vonatkozó házirendet, a rendszer emlékezteti a felhasználókat a régi jelszavak módosítására, és letiltotta a lejárt jelszóval rendelkező fiókokat. Ez a szabály ellenőrzi, hogy a jelszó elévülési szabályzata engedélyezve van-e az összes SQL-bejelentkezéshez.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1048     |Az adatbázis-rendszerbiztonsági tag nem képezhető le a `sa` fiókhoz          |Magas         |A fiókhoz hozzárendelt adatbázis-rendszerbiztonsági tag `sa` kihasználható a támadók számára az engedélyek megemelésére `sysadmin`         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1052     |Builtin\rendszergazda eltávolítása kiszolgálói bejelentkezésként          |Alacsony         |A Builtin\rendszergazda csoport tartalmazza a Windows helyi rendszergazdák csoportot. Microsoft SQL Server régebbi verzióiban ez a csoport alapértelmezés szerint rendszergazdai jogokkal rendelkezik. Ez a szabály ellenőrzi, hogy a csoport el lett-e távolítva a SQL Serverból.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1053     |Az alapértelmezett névvel rendelkező fiókot `sa` át kell adni vagy le kell tiltani          |Alacsony         |`sa` egy jól ismert fiók az 1. fő AZONOSÍTÓval. Ez a szabály ellenőrzi, hogy a `sa` fiók átnevezve vagy Letiltva van-e.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1054     |Az objektumokon vagy oszlopokon nem adható meg túlzott engedély a nyilvános szerepkörhöz          |Alacsony         |Minden SQL Server bejelentkezés a nyilvános kiszolgálói szerepkörbe tartozik. Ha egy kiszolgáló rendszerbiztonsági tagja nem adott meg vagy tagadott meg konkrét engedélyeket egy biztonságos objektumra vonatkozóan, a felhasználó örökli az adott objektum nyilvános számára biztosított engedélyeit. Ez a szabály az összes olyan biztonságos objektum vagy oszlop listáját jeleníti meg, amelyek az összes felhasználó számára elérhetők a nyilvános szerepkörön keresztül.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1058     |`sa` a bejelentkezést le kell tiltani          |Magas         |`sa` egy jól ismert fiók az 1. fő AZONOSÍTÓval. Ez a szabály ellenőrzi, hogy a `sa` fiók le van-e tiltva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1059     |xp_cmdshell le kell tiltani          |Magas         |a xp_cmdshell elindítja a Windows parancs-rendszerhéjt, és karakterláncot továbbít a végrehajtáshoz. Ez a szabály ellenőrzi, hogy a xp_cmdshell le van-e tiltva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1067     |Database Mail XPs-t le kell tiltani, ha nincs használatban          |Közepes         |Ez a szabály ellenőrzi, hogy a Database Mail le van-e tiltva, ha nincs adatbázis-levelezési profil konfigurálva. A Database Mail a SQL Server adatbázismotor e-mail-üzeneteinek küldésére használható, és alapértelmezés szerint le van tiltva. Ha nem használja ezt a funkciót, ajánlott letiltani a felületet a felület csökkentése érdekében.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1068     |A kiszolgálói jogosultságokat nem szabad közvetlenül a rendszerbiztonsági tag számára megadni          |Alacsony         |A kiszolgálói szintű engedélyek egy kiszolgálói szintű objektumhoz vannak társítva, hogy szabályozzák, mely felhasználók férhetnek hozzá az objektumhoz. Ez a szabály ellenőrzi, hogy nincsenek-e közvetlenül a bejelentkezések számára elérhető kiszolgálói szintű engedélyek.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1070     |Az adatbázis felhasználói nem ugyanazt a nevet használják, mint a kiszolgálói bejelentkezés          |Alacsony         |Az adatbázis felhasználói megoszthatják a kiszolgáló bejelentkezési nevét. Ez a szabály ellenőrzi, hogy nincsenek-e ilyen felhasználók.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1072     |A hitelesítési módnak Windows-hitelesítésnek kell lennie          |Közepes         |Két lehetséges hitelesítési mód létezik: Windows-hitelesítési mód és kevert mód. A kevert üzemmód azt jelenti, hogy SQL Server engedélyezi a Windows-hitelesítést és a SQL Server hitelesítést. Ez a szabály ellenőrzi, hogy a hitelesítési mód Windows-hitelesítésre van-e beállítva.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1094     |Az adatbázis-engedélyeket nem szabad közvetlenül a rendszerbiztonsági tag számára megadni          |Alacsony         |Az engedélyek olyan szabályok, amelyek egy biztonságos objektumhoz vannak társítva annak szabályozására, hogy mely felhasználók férhetnek hozzá az objektumhoz. Ez a szabály ellenőrzi, hogy nincsenek-e közvetlenül a felhasználók számára elérhető adatbázis-engedélyek.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1095     |A túlzott engedélyeket nem szabad a nyilvános szerepkörhöz adni          |Közepes         |Minden SQL Server bejelentkezés a nyilvános kiszolgálói szerepkörbe tartozik. Ha egy kiszolgáló rendszerbiztonsági tagja nem adott meg vagy tagadott meg konkrét engedélyeket egy biztonságos objektumra vonatkozóan, a felhasználó örökli az adott objektum nyilvános számára biztosított engedélyeit. Megjelenik a nyilvános szerepkörhöz megadott összes engedély listája.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1096     |A fő VENDÉGnek nem szabad engedélyeket adni az adatbázisban          |Alacsony         |Minden adatbázis tartalmaz egy vendég nevű felhasználót. A VENDÉGnek biztosított engedélyeket azok a felhasználók öröklik, akik hozzáférnek az adatbázishoz, de nem rendelkeznek felhasználói fiókkal az adatbázisban. Ez a szabály ellenőrzi, hogy az összes engedély vissza lett-e vonva a vendég felhasználótól.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1097     |Az elsődleges VENDÉGnek nem szabad engedélyeket adni az objektumokra vagy oszlopokra vonatkozóan          |Alacsony         |Minden adatbázis tartalmaz egy vendég nevű felhasználót. A VENDÉGnek biztosított engedélyeket azok a felhasználók öröklik, akik hozzáférnek az adatbázishoz, de nem rendelkeznek felhasználói fiókkal az adatbázisban. Ez a szabály ellenőrzi, hogy az összes engedély vissza lett-e vonva a vendég felhasználótól.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1099     |A vendég felhasználó nem kaphat engedélyeket az adatbázis biztonságos elemek migrálására          |Alacsony         |Minden adatbázis tartalmaz egy vendég nevű felhasználót. A VENDÉGnek biztosított engedélyeket azok a felhasználók öröklik, akik hozzáférnek az adatbázishoz, de nem rendelkeznek felhasználói fiókkal az adatbázisban. Ez a szabály ellenőrzi, hogy az összes engedély vissza lett-e vonva a vendég felhasználótól.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1246     |Az alkalmazás szerepkörei nem használhatók          |Alacsony         |Az alkalmazási szerepkör olyan adatbázis-rendszerbiztonsági tag, amely lehetővé teszi, hogy az alkalmazás a saját felhasználóhoz hasonló engedélyekkel fusson. Az alkalmazás szerepkörei lehetővé teszik, hogy csak egy adott alkalmazáson keresztül csatlakozó felhasználók férhessenek hozzá bizonyos adatokhoz. Az alkalmazási szerepkörök jelszó-alapúak (amelyek jellemzően parancsmagba), és nem jogosultak arra, hogy a jelszó-találgatások alapján elérhetővé tegye az adatbázist az alkalmazás-szerepkör megszemélyesítése számára. Ez a szabály ellenőrzi, hogy nincsenek-e alkalmazás-szerepkörök definiálva az adatbázisban.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database         |
|VA1248     |A felhasználó által definiált adatbázis-szerepkörök nem lehetnek rögzített szerepkörök tagjai.          |Közepes         |Az adatbázisokban lévő engedélyek egyszerű kezeléséhez SQL Server számos szerepkört biztosít, amelyek más rendszerbiztonsági tag. Ilyenek például a Microsoft Windows operációs rendszer csoportjai. Az adatbázis-fiókokat és más SQL Server szerepköröket adatbázis-szintű szerepkörökbe lehet adni. Egy rögzített adatbázis-szerepkör tagjai más felhasználókat is hozzáadhatnak ugyanahhoz a szerepkörhöz. Ez a szabály ellenőrzi, hogy a felhasználó által definiált szerepkörök nem tagjai-e a rögzített szerepköröknek.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1267     |A befoglalt felhasználóknak Windows-hitelesítést kell használniuk          |Közepes         |A tárolt felhasználók az adatbázisban található felhasználók, és nem igényelnek bejelentkezési leképezést. Ez a szabály ellenőrzi, hogy a meglevő felhasználók Windows-hitelesítést használnak-e.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1280     |A nyilvános kiszolgálóra vonatkozó engedélyeket a lehető legkisebbre kell állítani          |Közepes         |Minden SQL Server bejelentkezés a nyilvános kiszolgálói szerepkörbe tartozik. Ha egy kiszolgáló rendszerbiztonsági tagja nem adott meg vagy tagadott meg konkrét engedélyeket egy biztonságos objektumra vonatkozóan, a felhasználó örökli az adott objektum nyilvános számára biztosított engedélyeit. Ez a szabály ellenőrzi, hogy a nyilvános kiszolgáló számára biztosított engedélyek a lehető legkisebbek-e.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1282     |Az árva szerepköröket el kell távolítani          |Alacsony         |Az árva szerepkörök olyan felhasználó által definiált szerepkörök, amelyek nem rendelkeznek tagokkal. Távolítsa el az árva szerepköröket, mivel azok nem szükségesek a rendszeren. Ez a szabály ellenőrzi, hogy vannak-e árva szerepkörök.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2020     |A rendszerbiztonsági tag minimális készletét meg kell adni, vagy módosítani kell a felhasználói adatbázis hatókörön belüli engedélyeit.          |Magas         |Minden SQL Server biztonságos jogosultsággal rendelkezik, amely a rendszerbiztonsági tag számára is biztosítható. Az engedélyek hatóköre a kiszolgáló szintjén (a bejelentkezésekhez és a kiszolgálói szerepkörökhöz), illetve az adatbázis szintjén (az adatbázis-felhasználókhoz és az adatbázis-szerepkörökhöz van rendelve). Ezek a szabályok azt határozzák meg, hogy csak a rendszerbiztonsági tag minimális készlete van megváltoztatva, vagy megváltoztathatja a felhasználói adatbázis hatókörön belüli engedélyeit.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2033     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű végrehajtási engedélyként kell megadni az objektumokon vagy oszlopokon          |Alacsony         |Ez a szabály ellenőrzi, hogy mely rendszerbiztonsági tag kapja meg az objektumok vagy oszlopok végrehajtási engedélyét annak érdekében, hogy ezt az engedélyt a rendszerbiztonsági tag minimális készlete számára biztosítsa. Minden SQL Server biztonságos jogosultsággal rendelkezik, amely a rendszerbiztonsági tag számára is biztosítható. Az engedélyek hatóköre a kiszolgáló szintjén (a bejelentkezésekhez és a kiszolgálói szerepkörökhöz), illetve az adatbázis szintjén (az adatbázis-felhasználókhoz, az adatbázis szerepköreihez vagy az alkalmazás szerepköreihez van rendelve). A végrehajtási engedély a tárolt eljárásokra és a skaláris függvényekre is vonatkozik, amelyek számított oszlopokban használhatók.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2103     |A kiterjesztett tárolt eljárásokra vonatkozó szükségtelen végrehajtási engedélyeket vissza kell vonni          |Közepes         |A kiterjesztett tárolt eljárások olyan DLL-fájlok, amelyeket a SQL Server egy példánya dinamikusan tud betölteni és futtatni. A SQL Server számos olyan kiterjesztett tárolt eljárással van csomagolva, amely lehetővé teszi a rendszer DLL-jei interakcióját. Ez a szabály ellenőrzi, hogy visszavonták-e a kiterjesztett tárolt eljárások szükségtelen végrehajtási engedélyeit.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2107     |A rendszerbiztonsági tagok minimális készletének a rögzített Azure SQL DB Master Database-szerepkörök tagjainak kell lennie          |Magas         |A SQL Database két korlátozott rendszergazdai szerepkört biztosít a főadatbázisban, amelybe a felhasználói fiókok hozzáadhatók, amelyek engedélyeket biztosítanak adatbázisok létrehozásához vagy a bejelentkezések kezeléséhez. Ez a szabály azt vizsgálja, hogy a rendszerbiztonsági tagok minimális készlete tagja-e a rendszergazdai szerepköröknek.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2108     |A rendszerbiztonsági tagok minimális készletének a rögzített nagy hatású adatbázis-szerepkörök tagjainak kell lennie          |Magas         |A SQL Server szerepköröket biztosít az engedélyek kezeléséhez. A szerepkörök olyan rendszerbiztonsági tag, amelyek más résztvevőket csoportosítanak. Az adatbázis szintű szerepkörök a jogosultsági hatókörébe tartozó adatbázisra érvényesek. Ez a szabály ellenőrzi, hogy a rendszerbiztonsági tagok minimális készlete tagja-e a rögzített adatbázis-szerepköröknek.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2109     |A rendszerbiztonsági tagok minimális készletének a rögzített, alacsony hatású adatbázis-szerepkörök tagjainak kell lennie          |Alacsony         |A SQL Server szerepköröket biztosít az engedélyek kezeléséhez. A szerepkörök olyan rendszerbiztonsági tag, amelyek más résztvevőket csoportosítanak. Az adatbázis szintű szerepkörök a jogosultsági hatókörébe tartozó adatbázisra érvényesek. Ez a szabály ellenőrzi, hogy a rendszerbiztonsági tagok minimális készlete tagja-e a rögzített adatbázis-szerepköröknek.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA2110     |A beállításjegyzék eléréséhez szükséges engedélyek végrehajtásának visszavonása          |Magas         |A beállításjegyzék kiterjesztett tárolt eljárásai lehetővé teszik a Microsoft SQL Server számára az értékek és kulcsok írását és enumerálását a beállításjegyzékben. Az Enterprise Manager a kiszolgáló konfigurálására használja. Ez a szabály ellenőrzi, hogy a beállításjegyzék kibővített tárolt eljárásainak végrehajtásához szükséges engedélyek visszavonása minden felhasználótól (a dbo kivételével) történt-e.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2113     |Az Adatátalakítási szolgáltatások (DTS) engedélyeit csak a SSIS szerepkörei számára szabad megadni          |Közepes         |Az Adatátalakítási szolgáltatások (DTS) olyan objektumok és segédprogramok összessége, amelyek lehetővé teszik a kinyerési, átalakítási és betöltési műveletek automatizálását egy adatbázisba vagy onnan. Az objektumok DTS-csomagok és azok összetevői, és a segédprogramokat DTS-eszközöknek nevezzük. Ez a szabály ellenőrzi, hogy csak a SSIS szerepkörök kapnak-e engedélyeket a DTS rendszertárolt eljárásainak használatához, és a nyilvános szerepkörre vonatkozó engedélyek a DTS rendszer tárolt eljárásainak használatára lettek visszavonva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2114     |A rendszerbiztonsági tagok minimális készletének a nagy hatású rögzített kiszolgálói szerepkörök tagjainak kell lennie          |Magas         |A SQL Server szerepköröket biztosít az engedélyek kezeléséhez. A szerepkörök olyan rendszerbiztonsági tag, amelyek más résztvevőket csoportosítanak. A kiszolgálói szintű szerepkörök a jogosultsági hatókörük szerint a kiszolgálóra érvényesek. Ez a szabály ellenőrzi, hogy a rendszerbiztonsági tagok minimális készlete tagja-e a rögzített kiszolgálói szerepköröknek.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2129     |Az aláírt modulok módosításait engedélyezni kell          |Magas         |Egy tárolt eljárást, függvényt vagy triggert is aláírhat tanúsítvánnyal vagy aszimmetrikus kulccsal. Ez olyan forgatókönyvek esetén lett kialakítva, amikor az engedélyek nem öröklődnek a tulajdonosi láncolás vagy a tulajdonosi lánc megszakadásakor (például dinamikus SQL). Ez a szabály ellenőrzi az aláírt modulok módosításait, ami a kártékony használat jele lehet.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Database<br/><br/>Felügyelt SQL-példány         |
|VA2130     |Az adatbázishoz hozzáféréssel rendelkező összes felhasználó nyomon követése          |Alacsony         |Ez az ellenőrzési szolgáltatás minden olyan felhasználót nyomon követ, akinek van hozzáférése egy adatbázishoz. Győződjön meg arról, hogy ezek a felhasználók jogosultak a szervezet aktuális szerepkörének megfelelően.         |<nobr>SQL Database<nobr/><br/><br/>Azure Synapse         |

## <a name="auditing-and-logging"></a>Naplózás és naplózás

|Szabályazonosító  |Szabály címe  |Szabály súlyossága  |Szabály leírása  |Platform  |
|---------|---------|---------|---------|---------|
|VA1045     |Az alapértelmezett nyomkövetést engedélyezni kell          |Közepes         |Az alapértelmezett nyomkövetés hibaelhárítási segítséget nyújt az adatbázis-rendszergazdáknak azáltal, hogy az első alkalommal a problémák diagnosztizálásához szükséges naplózási adatokkal rendelkeznek. Ez a szabály ellenőrzi, hogy az alapértelmezett nyomkövetés engedélyezve van-e.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1091     |A sikeres és sikertelen bejelentkezési kísérletek (alapértelmezett nyomkövetés) naplózása akkor engedélyezett, ha a "Bejelentkezés naplózása" beállítás be van állítva a bejelentkezések nyomon követésére          |Alacsony         |SQL Server bejelentkezési naplózási konfiguráció lehetővé teszi, hogy a rendszergazdák nyomon kövessék a SQL Server példányba bejelentkező felhasználókat. Ha a felhasználó úgy dönt, hogy a Bejelentkezés naplózása lehetőséget választja a SQL Server példányba bejelentkező felhasználók nyomon követéséhez, akkor fontos, hogy a sikeres és sikertelen bejelentkezési kísérleteket is engedélyezze.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1093     |A hibák naplóinak maximális száma csak 12 vagy több lehet          |Alacsony         |Minden SQL Server hibanapló minden olyan hibával vagy hibával kapcsolatos információt tartalmaz, amelyek a SQL Server legutóbbi újraindítása óta történtek, vagy az utolsó alkalommal, amikor újrahasznosítják a hibák naplóit. Ez a szabály ellenőrzi, hogy a hibák maximális száma 12 vagy több.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1258     |Az adatbázis-tulajdonosok a várt módon jelennek meg          |Magas         |Az adatbázis-tulajdonosok az összes konfigurációs és karbantartási tevékenységet elvégezhetik az adatbázison, és SQL Server is elhelyezhetik az adatbázisokat. Az adatbázis-tulajdonosok nyomon követése azért fontos, hogy ne kelljen túlzott jogosultságokkal rendelkezni néhány rendszerbiztonsági tag számára. Hozzon létre egy alapkonfigurációt, amely meghatározza az adatbázis várt adatbázis-tulajdonosait. Ez a szabály ellenőrzi, hogy az adatbázis tulajdonosai az alaptervben meghatározottak-e.         |<nobr>2016. SQL Server +<sup>3</sup><nobr/><br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1264     |A sikeres és sikertelen bejelentkezési kísérletek naplózását engedélyezni kell          |Alacsony         |SQL Server naplózási konfiguráció lehetővé teszi, hogy a rendszergazdák nyomon kövessék azokat a felhasználókat, akik bejelentkeznek SQL Server példányokra, amelyekért felelősek. Ez a szabály ellenőrzi, hogy a naplózás engedélyezve van-e a sikeres és sikertelen bejelentkezési kísérletekhez.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1265     |A sikeres és sikertelen bejelentkezési kísérletek naplózását is engedélyezni kell a befoglalt adatbázis-hitelesítéshez.          |Közepes         |SQL Server naplózási konfiguráció lehetővé teszi, hogy a rendszergazdák nyomon kövessék a felhasználók számára a SQL Server példányokat, amelyekért felelősek. Ez a szabály ellenőrzi, hogy a naplózás engedélyezve van-e a sikeres és sikertelen bejelentkezési kísérletekhez a foglalt adatbázis-hitelesítéshez.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1281     |A felhasználó által definiált szerepkörökhöz tartozó összes tagságot szánni kell          |Közepes         |A felhasználó által definiált szerepkörök olyan rendszerbiztonsági tag, amelyet a felhasználó a csoportok egyszerű kezeléséhez határoz meg. Ezeknek a szerepköröknek a figyelése fontos a túlzott engedélyek elkerülése érdekében. Hozzon létre egy alapkonfigurációt, amely meghatározza a várt tagságot az egyes felhasználók által definiált szerepkörökhöz. Ez a szabály ellenőrzi, hogy a felhasználó által definiált szerepkörök összes tagsága az alapkonfigurációban van-e meghatározva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1283     |Legalább 1 aktív naplózásnak kell lennie a rendszeren          |Alacsony         |A SQL Server adatbázismotor vagy egy önálló adatbázis egy példányának naplózása magában foglalja az adatbázismotor által megjelenő események nyomon követését és naplózását. A SQL Server naplózási objektum a figyelésre szolgáló kiszolgáló-vagy adatbázis-szintű műveletek, illetve műveletek csoportjainak egyetlen példányát gyűjti. Ez a szabály ellenőrzi, hogy van-e legalább egy aktív naplózás a rendszeren.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2061     |A naplózást a kiszolgáló szintjén kell engedélyezni          |Magas         |Azure SQL Database naplózás nyomon követi az adatbázis eseményeit, és az Azure Storage-fiókban lévő naplóba írja azokat. A naplózás segít megérteni az adatbázis-tevékenységeket, és olyan eltéréseket és rendellenességeket mutat be, amelyek az üzleti problémákat vagy a feltételezett biztonsági szabálysértéseket jelezhetik, valamint segítséget nyújtanak a szabályozás megfelelőségének teljesítéséhez. További információ: [Azure SQL-naplózás](https://docs.microsoft.com/azure/sql-database/sql-database-auditing). Ez a szabály ellenőrzi, hogy a naplózás engedélyezve van-e.         |<nobr/>SQL Database<br/><br/>Azure Synapse          |

## <a name="data-protection"></a>Adatvédelem

|Szabályazonosító  |Szabály címe  |Szabály súlyossága  |Szabály leírása  |Platform  |
|---------|---------|---------|---------|---------|
|VA1098     |A meglévő SSB-vagy tükrözési végpontoknak AES-kapcsolatokat kell megkövetelniük          |Magas         |A Service Broker és tükrözési végpontok különböző titkosítási algoritmusokat támogatnak, beleértve a nem titkosítást. Ez a szabály ellenőrzi, hogy a meglévő végpontoknak van-e AES-titkosítása.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1219     |Az transzparens adattitkosítást engedélyezni kell          |Közepes         |Az transzparens adattitkosítás (TDE) segítségével megvédheti az adatbázis fájljait az információkkal való illetéktelen hozzáférést azáltal, hogy valós idejű titkosítást és visszafejtést végez az adatbázis, a társított biztonsági másolatok és a tranzakciós naplófájlok számára az alkalmazás módosításának megkövetelése nélkül. Ez a szabály ellenőrzi, hogy a TDE engedélyezve van-e az adatbázison.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1220     |A TDS használatával történő adatbázis-kommunikációt a TLS protokollon keresztül kell védeni          |Magas         |A Microsoft SQL Server a SSL (SSL) vagy a Transport Layer Security (TLS) használatával titkosíthatja a hálózaton keresztül továbbított adatokat egy SQL Server és egy ügyfélalkalmazás egy példánya között. Ez a szabály ellenőrzi, hogy a SQL Server összes kapcsolata titkosítva van-e a TLS protokollon keresztül.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1221     |Az adatbázis-titkosítási szimmetrikus kulcsoknak AES algoritmust kell használniuk          |Magas         |A SQL Server titkosítási kulcsokat használ a kiszolgálói adatbázisokban tárolt adathitelesítő adatok és kapcsolódási adatok biztonságossá tételéhez. A SQL Server két típusú kulccsal rendelkezik: szimmetrikus és aszimmetrikus. Ez a szabály ellenőrzi, hogy az adatbázis-titkosítási szimmetrikus kulcsok AES algoritmust használnak-e.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1222     |Cell-Level titkosítási kulcsoknak AES algoritmust kell használniuk          |Magas         |A Cell-Level encryption (CLE) lehetővé teszi az adattitkosítást szimmetrikus és aszimmetrikus kulcsok használatával. Ez a szabály ellenőrzi, hogy Cell-Level titkosítási szimmetrikus kulcsok használnak-e AES-algoritmust.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1223     |A tanúsítvány kulcsainak legalább 2048 bitet kell használniuk          |Magas         |A tanúsítvány kulcsait az RSA és más titkosítási algoritmusok használják az adatvédelem érdekében. Ezeknek a kulcsoknak elég hosszúnak kell lenniük a felhasználó által tárolt adatmennyiség biztonságossá tételéhez. Ez a szabály ellenőrzi, hogy a kulcs hossza legalább 2048 bit az összes tanúsítvány esetében.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1224     |Az aszimmetrikus kulcsok hosszának legalább 2048 bitenek kell lennie          |Magas         |Az adatbázis aszimmetrikus kulcsai számos titkosítási algoritmusban használatosak. ezeknek a kulcsoknak elég hosszúnak kell lenniük a titkosított adatmennyiség biztonságossá tételéhez, ez a szabály ellenőrzi, hogy az adatbázisban tárolt összes aszimmetrikus kulcs hossza legalább 2048 bit.         |<nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/>SQL Database         |
|VA1279     |A kényszerített titkosítást engedélyezni kell a TDS-hez          |Magas         |Ha az adatbázis-kezelő kényszerített titkosítási beállítása engedélyezve van, az ügyfél és a kiszolgáló közötti összes kommunikáció titkosítva van, függetlenül attól, hogy a "kapcsolat titkosítása" beállítás (például a SSMS) be van-e jelölve. Ez a szabály ellenőrzi, hogy engedélyezve van-e a kényszerített titkosítási beállítás.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1288     |A bizalmas adatoszlopokat osztályozni kell          |Közepes         |Ez a szabály ellenőrzi, hogy a beolvasott adatbázis potenciálisan bizalmas adatokat tartalmaz-e, amelyek nincsenek besorolva.         |<nobr/>SQL Database         |
|VA2060     |Az SQL-veszélyforrások észlelését a kiszolgáló szintjén kell engedélyezni          |Közepes         |Az SQL Threat Detection olyan biztonsági réteget biztosít, amely a lehetséges biztonsági réseket és rendellenes tevékenységeket észleli olyan adatbázisokban, mint például az SQL-injektálási támadások és a szokatlan viselkedési minták. Ha potenciális fenyegetést észlel a fenyegetés észlelése, a rendszer e-mailben és Azure Security Centerban is végrehajt egy valós idejű riasztást, amely magában foglalja az adott fenyegetés egyértelmű vizsgálatát és szervizelési lépéseit. További információ: a [fenyegetések észlelésének beállítása](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection). Ez az ellenőrzés ellenőrzi, hogy engedélyezve van-e az SQL-veszélyforrások észlelése         |<nobr/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |

## <a name="installation-updates-and-patches"></a>Telepítési frissítések és javítások

|Szabályazonosító  |Szabály címe  |Szabály súlyossága  |Szabály leírása  |Platform  |
|---------|---------|---------|---------|---------|
| VA1018     |A legújabb frissítéseket telepíteni kell          |Magas         |A Microsoft rendszeres időközönként kibocsátja a kumulatív frissítéseket (ke) a SQL Server egyes verzióihoz. Ez a szabály ellenőrzi, hogy telepítve van-e a legújabb CU a használt SQL Server adott verziójára, ha egy karakterláncot továbbít a végrehajtáshoz. Ez a szabály ellenőrzi, hogy az összes felhasználó (kivéve a dbo) nem rendelkezik-e engedéllyel a xp_cmdshell kiterjesztett tárolt eljárás végrehajtásához. |<nobr>SQL Server 2005<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2008<nobr/><br/><br/><nobr>SQL Server 2012<nobr/><br/><br/><nobr>SQL Server 2014<nobr/><br/><br/><nobr>SQL Server 2016<nobr/><br/><br/>SQL Server 2017<br/>|
|VA2128     |A sebezhetőségi felmérés nem támogatott a SQL Server 2012-nál alacsonyabb SQL Server verzióknál          |Magas         |A sebezhetőségi felmérés vizsgálatának futtatásához a SQL Server a kiszolgálót SQL Server 2012-as vagy újabb verzióra kell frissíteni, SQL Server 2008 R2 és az alábbi verziók már nem támogatottak a Microsoft számára. További információ: <https://www.microsoft.com/cloud-platform/windows-sql-server-2008>         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |

## <a name="surface-area-reduction"></a>Felszíni terület csökkentése

|Szabályazonosító  |Szabály címe  |Szabály súlyossága  |Szabály leírása  |Platform  |
|---------|---------|---------|---------|---------|
|VA1022     |Az ad hoc elosztott lekérdezéseket le kell tiltani          |Közepes         |Az ad hoc elosztott lekérdezések a `OPENROWSET` és a `OPENDATASOURCE` függvényeket használják a OLE DBT használó távoli adatforrásokhoz való kapcsolódáshoz. Ez a szabály ellenőrzi, hogy az ad hoc elosztott lekérdezések le vannak-e tiltva.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1023     |A CLR-t le kell tiltani          |Magas         |A CLR lehetővé teszi, hogy a felügyelt kód a Microsoft SQL Server környezetben fusson. Ez a szabály ellenőrzi, hogy a CLR le van-e tiltva.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1026     |A CLR-t le kell tiltani          |Közepes         |A CLR lehetővé teszi, hogy a felügyelt kód a Microsoft SQL Server környezetben fusson. CLR strict security a biztonságos és EXTERNAL_ACCESS szerelvényeket úgy kezeli, mintha nem biztonságosak voltak megjelölve, és megköveteli, hogy az összes szerelvényt egy olyan tanúsítvány vagy aszimmetrikus kulcs írja alá, amely egy olyan megfelelő bejelentkezési azonosítóval rendelkezik, amely nem biztonságos szerelvény engedélyt kapott a Master adatbázisban. Ez a szabály ellenőrzi, hogy a CLR le van-e tiltva.         |<nobr>2017 SQL Server +<sup>2</sup><nobr/><br/><br/>SQL Managed Instance         |
|VA1027     |A nem követett megbízható szerelvényeket el kell távolítani          |Magas         |A nem BIZTONSÁGOSNAK jelölt szerelvényeket egy olyan tanúsítvánnyal vagy aszimmetrikus kulccsal kell aláírni, amely a főadatbázisban nem biztonságos szerelvény engedélyt kapott. A megbízható szerelvények megkerülhetik ezt a követelményt.          |<nobr>2017 SQL Server +<nobr/><br/><br/>SQL Managed Instance         |
|VA1044     |A távoli rendszergazdai kapcsolatokat le kell tiltani, ha nem kifejezetten szükségesek          |Közepes         |Ez a szabály ellenőrzi, hogy a távoli dedikált rendszergazdai kapcsolatok le vannak-e tiltva, ha a támadási felület csökkentése érdekében nem használják fürtözésre. A SQL Server dedikált rendszergazdai kapcsolatokat (DAC) biztosít. A DAC lehetővé teszi, hogy a rendszergazda egy futó kiszolgálót futtasson a diagnosztikai függvények vagy a Transact-SQL-utasítások végrehajtásához, illetve a kiszolgálón felmerülő problémák elhárításához, és ez a megoldás vonzó célpontot jelent, ha távolról engedélyezve van a támadás.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1051     |AUTO_CLOSE le kell tiltani az összes adatbázison          |Közepes         |A AUTO_CLOSE beállítással megadható, hogy az adatbázis szabályosan leálljon-e, és az utolsó felhasználó leválasztása után felszabadítja az erőforrásokat. A szolgáltatás előnyeitől függetlenül az adatbázis agresszív megnyitásával és bezárásával is járhat, ezért fontos, hogy a szolgáltatás letiltva maradjon. Ez a szabály ellenőrzi, hogy ez a beállítás le van-e tiltva az aktuális adatbázisban.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1066     |A nem használt Service Broker-végpontokat el kell távolítani          |Alacsony         |Service Broker üzenetsor-kezelési és megbízható üzenetkezelést biztosít SQL Server számára. Service Broker a rendszer mindkét olyan alkalmazás esetében használatos, amely egyetlen SQL Server példányt használ, és a több példányon elosztani kívánt alkalmazásokat. Service Broker végpontok lehetőséget biztosítanak a szállítás biztonságára és az üzenetek továbbítására. Ez a szabály felsorolja az összes Service Broker-végpontot. Távolítsa el azokat, amelyek nincsenek használatban.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1071     |Az "indítási tárolt eljárások keresése" lehetőséget le kell tiltani          |Közepes         |Ha engedélyezve van az "indítási folyamatok keresése", SQL Server megvizsgálja és futtatja a kiszolgálón definiált összes automatikusan futtatott tárolt eljárást. Ha ez a beállítás engedélyezve van SQL Server megkeresi és futtatja a kiszolgálón definiált összes automatikusan futtatott tárolt eljárást. Ez a szabály ellenőrzi, hogy ez a lehetőség le van-e tiltva.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1092     |A SQL Server Browser szolgáltatás nem hirdeti meg SQL Server példányt          |Alacsony         |A SQL Server a SQL Server Browser szolgáltatás használatával sorolja fel a számítógépre telepített adatbázismotor példányait. Ez lehetővé teszi, hogy az ügyfélalkalmazások megkeressék a kiszolgálót, és segítsék az ügyfeleket az adatbázismotor több példánya között ugyanazon a számítógépen. Ez a szabály ellenőrzi, hogy az SQL-példány el van-e rejtve.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1102     |A megbízható bitet le kell tiltani minden adatbázison, kivéve a MSDB          |Magas         |A megbízható adatbázis tulajdonság azt jelzi, hogy a SQL Server-példány megbízható-e az adatbázist és a benne található tartalmakat. Ha ez a beállítás engedélyezve van az adatbázis-modulok (például a felhasználó által definiált függvények vagy tárolt eljárások), amelyek megszemélyesítési környezetet használnak, az adatbázison kívül is hozzáférhetnek az erőforrásokhoz. Ez a szabály ellenőrzi, hogy a megbízható bit le van-e tiltva minden adatbázison, kivéve a MSDB-t.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1143     |a "dbo" felhasználó nem használható normál szolgáltatási művelethez          |Közepes         |A "dbo" vagy az adatbázis tulajdonosa egy olyan felhasználói fiók, amely rendelkezik az adatbázisban lévő összes tevékenység végrehajtásához szükséges engedélyekkel. A sysadmin (rendszergazda) rögzített kiszolgálói szerepkör tagjait a rendszer automatikusan leképezi a dbo. Ez a szabály ellenőrzi, hogy a dbo nem az egyetlen fiók, amely jogosult az adatbázis elérésére. Vegye figyelembe, hogy az újonnan létrehozott tiszta adatbázison ez a szabály csak a további szerepkörök létrehozása után fog működni.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance<br/><br/>SQL Database<br/><br/>Azure Synapse         |
|VA1144     |A modell adatbázisának csak a "dbo" által elérhetőnek kell lennie          |Közepes         |A modell-adatbázist a SQL Server példányán létrehozott összes adatbázis sablonja használja. A modell-adatbázis módosításait, például az adatbázis méretének helyreállítási modelljét és az egyéb adatbázis-beállításokat a rendszer a később létrehozott adatbázisokra alkalmazza. Ez a szabály ellenőrzi, hogy a dbo az egyetlen fiók, amely jogosult a modell-adatbázis elérésére.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1230     |A FileStream le kell tiltani          |Magas         |A FILESTREAM egy NTFS fájlrendszerrel integrálja a SQL Server adatbázis-kezelőt úgy, hogy varbinary (max) bináris, nagy méretű objektum-(BLOB-) adatfájlokat tárol a fájlrendszerben. A Transact-SQL-utasításokkal FILESTREAM adatokat lehet beszúrni, frissíteni, lekérdezni, keresni és biztonsági másolatot készíteni. A FileStream engedélyezése az SQL Serveren további NTFS streaming API-t tesz elérhetővé, amely növeli a támadási felületet, és kihasználja a kártékony támadásokat. Ez a szabály ellenőrzi, hogy a FileStream le van-e tiltva.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1235     |Le kell tiltani a "replikációs XPs" kiszolgálói konfigurációt.          |Közepes         |A támadási felület korlátozásához tiltsa le az elavult kiszolgálói konfiguráció "Replication XPs" beállítását. Ez csak belső konfigurációs beállítás.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1244     |Az árva felhasználókat el kell távolítani az SQL Server adatbázisaiból          |Közepes         |Egy adatbázis-felhasználó, amely egy adatbázisban létezik, de nem rendelkezik megfelelő bejelentkezési azonosítóval a főadatbázisban, vagy külső erőforrásként (például egy Windows-felhasználó), egy árva felhasználó, és azt el kell távolítani vagy újra kell rendelni egy érvényes bejelentkezési azonosítóhoz. Ez a szabály ellenőrzi, hogy nincsenek-e árva felhasználók.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1245     |A dbo információinak konzisztensnek kell lenniük a célként megadott adatbázis és a fő között          |Magas         |Az adatbázis dbo-identitásával kapcsolatban redundáns információk találhatók: az adatbázisban tárolt metaadatok és a Master DB-ben tárolt metaadatok. Ez a szabály ellenőrzi, hogy ezek az információk konzisztensek-e a cél-adatbázis és a főkiszolgáló között.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1247     |Nem lehet automatikus indítású SPs-ként megjelölve          |Magas         |Ha SQL Server van konfigurálva az "indítási folyamatok keresése" értékre, a kiszolgáló megvizsgálja a főadatbázist az automatikus indításként megjelölt tárolt eljárások esetében. Ez a szabály ellenőrzi, hogy nincs-e automatikus indításra jelölt SPs.         |<nobr>SQL Server 2012 +<nobr/>         |
|VA1256     |A felhasználó CLR-szerelvényei nem határozhatók meg az adatbázisban.          |Magas         |A CLR-szerelvények tetszőleges kód végrehajtására használhatók SQL Server folyamaton. Ez a szabály ellenőrzi, hogy nincsenek-e felhasználó által definiált CLR-szerelvények az adatbázisban.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA1277     |A bázisterület hálózati titkosítását engedélyezni kell          |Magas         |A Base egy olyan technológia, amely a nem összehasonlítható és a kapcsolati adatoknak a SQL Serveron belül való elérését és összekapcsolását is magában foglalja. A Base Network encryption beállítással SQL Servert konfigurálhat a vezérlési és az adatcsatornák titkosításához, amikor a program a következőt használja. Ez a szabály ellenőrzi, hogy ez a beállítás engedélyezve van-e.         |<nobr>SQL Server 2016 +<nobr/>         |
|VA1278     |Külső kulcskezelő szolgáltatók alaptervének létrehozása          |Közepes         |A SQL Server bővíthető kulcskezelő (EKM) lehetővé teszi, hogy a harmadik féltől származó EKM/hardveres biztonsági modulok (HSM) gyártói regisztrálják moduljaikat a SQL Serverban. Ha a regisztrált SQL Server felhasználók használhatják a EKM-modulokban tárolt titkosítási kulcsokat, ez a szabály a rendszeren használt EKM-szolgáltatók listáját jeleníti meg.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2062     |Az adatbázis szintű tűzfalszabályok nem biztosíthatnak túlzott hozzáférést          |Magas         |A Azure SQL Database szintű tűzfal segíti az adatai védelme érdekében, hogy megakadályozza az adatbázishoz való hozzáférést, amíg meg nem adja, hogy mely IP-címek rendelkeznek engedéllyel. Az adatbázis-szintű tűzfalszabályok hozzáférést biztosítanak az adott adatbázishoz az egyes kérések származó IP-címe alapján. A fő-és felhasználói adatbázisok adatbázis-szintű tűzfalszabályok csak Transact-SQL-en keresztül hozhatók létre és kezelhetők (a kiszolgálói szintű tűzfalszabályoktól eltérően, amelyek a Azure Portal vagy a PowerShell használatával is létrehozhatók és kezelhetők). További információ: [Azure SQL Database és az Azure szinapszis Analytics IP-tűzfalszabályok](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Ez az ellenőrzés azt ellenőrzi, hogy az adatbázis-szintű tűzfalszabályok nem biztosítanak hozzáférést több mint 255 IP-címhez.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2063     |A kiszolgálói szintű tűzfalszabályok nem biztosíthatnak túlzott hozzáférést          |Magas         |Az Azure SQL Server-szintű tűzfal segít a kiszolgáló védelmében azáltal, hogy megakadályozza az adatbázisok elérését, amíg meg nem adja, hogy mely IP-címek rendelkeznek engedéllyel. A kiszolgálói szintű tűzfalszabályok hozzáférést biztosítanak a kiszolgálóhoz tartozó összes adatbázishoz az egyes kérések eredeti IP-címe alapján.  A kiszolgálói szintű tűzfalszabályok csak a Transact-SQL használatával, valamint a Azure Portal vagy a PowerShell segítségével hozhatók létre és kezelhetők. További információ: [Azure SQL Database és az Azure szinapszis Analytics IP-tűzfalszabályok](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Ez az ellenőrzés ellenőrzi, hogy a kiszolgáló szintű tűzfalszabályok nem biztosítanak hozzáférést több mint 255 IP-címhez.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2064     |Az adatbázis szintű tűzfalszabályok nyomon követése és karbantartása szigorú minimum          |Magas         |A Azure SQL Database szintű tűzfal segíti az adatai védelme érdekében, hogy megakadályozza az adatbázishoz való hozzáférést, amíg meg nem adja, hogy mely IP-címek rendelkeznek engedéllyel. Az adatbázis-szintű tűzfalszabályok hozzáférést biztosítanak az adott adatbázishoz az egyes kérések származó IP-címe alapján. A fő-és felhasználói adatbázisok adatbázis-szintű tűzfalszabályok csak Transact-SQL-en keresztül hozhatók létre és kezelhetők (a kiszolgálói szintű tűzfalszabályoktól eltérően, amelyek a Azure Portal vagy a PowerShell használatával is létrehozhatók és kezelhetők). További információ: [Azure SQL Database és az Azure szinapszis Analytics IP-tűzfalszabályok](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure). Ez az ellenőrzési szabály az adatbázis-szintű tűzfalszabályok enumerálásával azonosítja az összes módosítást, és megoldható.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2065     |A kiszolgálói szintű tűzfalszabályok nyomon követése és karbantartása szigorú minimum          |Magas         |Az Azure SQL Server-szintű tűzfal megvédi az adatait azáltal, hogy megakadályozza az adatbázisok elérését, amíg meg nem adja, hogy mely IP-címek rendelkeznek engedéllyel. A kiszolgálói szintű tűzfalszabályok hozzáférést biztosítanak a kiszolgálóhoz tartozó összes adatbázishoz az egyes kérések eredeti IP-címe alapján.  A kiszolgálói szintű tűzfalszabályok a Transact-SQL használatával, valamint a Azure Portal vagy a PowerShell segítségével hozhatók létre és kezelhetők. További információ: [Azure SQL Database és az Azure szinapszis Analytics IP-tűzfalszabályok](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).  Ez az érték az összes kiszolgálói szintű tűzfalszabályok enumerálását azonosítja, hogy az összes módosítás azonosítható legyen és kezelhető legyen.         |<nobr/>SQL Database<br/><br/>Azure Synapse         |
|VA2111     |A minta-adatbázisokat el kell távolítani          |Alacsony         |Microsoft SQL Server több minta adatbázissal is elérhető. Ez a szabály ellenőrzi, hogy a minta adatbázisok el lettek-e távolítva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2120     |A biztonságot esetlegesen befolyásoló funkciókat le kell tiltani          |Magas         |SQL Server a funkciók és szolgáltatások széles körének biztosítására alkalmas. Előfordulhat, hogy egyes szolgáltatások és szolgáltatások nem feltétlenül szükségesek, és az engedélyezésük hátrányosan befolyásolhatja a rendszer biztonságát. Ez a szabály ellenőrzi, hogy ezek a funkciók le vannak-e tiltva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2121     | Az "OLE Automation-eljárások" funkciót le kell tiltani         |Magas         |SQL Server a funkciók és szolgáltatások széles körének biztosítására alkalmas. Előfordulhat, hogy a szolgáltatások és szolgáltatások némelyike alapértelmezés szerint nem szükséges, és lehetővé teszi számukra, hogy hátrányosan befolyásolják a rendszer biztonságát. Az OLE Automation-eljárások beállítás azt szabályozza, hogy az OLE Automation-objektumok a Transact-SQL batchs szolgáltatásban hozhatók-e létre. Ezek olyan kibővített tárolt eljárások, amelyek lehetővé teszik, hogy SQL Server felhasználók a SQL Serveron kívül is végrehajtsák a függvényeket. Attól függetlenül, hogy milyen előnyökkel jár, a biztonsági rések is használhatók, és népszerű mechanizmusként ismertek a megcélzott gépeken lévő fájlok megadásához. Javasoljuk, hogy az eszköz helyett használja a PowerShellt. Ez a szabály ellenőrzi, hogy az "OLE Automation-eljárások" szolgáltatás le van-e tiltva.          |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2122     |A "felhasználói beállítások" funkciót le kell tiltani          |Közepes         |SQL Server a funkciók és szolgáltatások széles körének biztosítására alkalmas. Előfordulhat, hogy egyes szolgáltatások és szolgáltatások nem feltétlenül szükségesek, és az engedélyezésük hátrányosan befolyásolhatja a rendszer biztonságát. A felhasználói beállítások az összes felhasználó globális alapértelmezett értékeit határozzák meg. Az alapértelmezett lekérdezés-feldolgozási beállítások listája a felhasználó munkahelyi munkamenetének időtartamára van kialakítva. A felhasználói beállítások lehetővé teszik a SET beállítások alapértelmezett értékének módosítását (ha a kiszolgáló alapértelmezett beállításai nem megfelelőek). Ez a szabály ellenőrzi, hogy a "felhasználói beállítások" szolgáltatás le van-e tiltva.         |<nobr>SQL Server 2012 +<nobr/><br/><br/>SQL Managed Instance         |
|VA2126     |Bővíthetőség – a biztonságot esetlegesen befolyásoló funkciók letiltása, ha nincs rá szükség          |Közepes         |SQL Server számos funkciót és szolgáltatást kínál. Előfordulhat, hogy a szolgáltatások és szolgáltatások némelyike alapértelmezés szerint nem szükséges, és lehetővé teszi számukra, hogy hátrányosan befolyásolják a rendszer biztonságát. Ez a szabály ellenőrzi, hogy vannak-e olyan konfigurációk, amelyek engedélyezik az kivonást egy külső adatforrásba, valamint a parancsfájlok bizonyos távoli nyelvi bővítményekkel való végrehajtását.         |<nobr>SQL Server 2016 +<nobr/>         |

## <a name="removed-rules"></a>Eltávolított szabályok

|Szabályazonosító  |Szabály címe  |
|---------|---------|
|VA1021     |A globális ideiglenes tárolt eljárásokat el kell távolítani         |
|VA1024    |A C2 naplózási módot engedélyezni kell |
|VA1069     |A rendszertáblákból és nézetekről való kiválasztáshoz szükséges engedélyeket vissza kell vonni a nem rendszergazdai jogosultságokból         |
|VA1090    |Győződjön meg arról, hogy az összes kormány ki van kapcsolva a polcról (GOTS) és az egyéni tárolt eljárások titkosítása |
|VA1103    |Csak CLR használata SAFE_ACCESS engedéllyel |
|VA1229     |A beállításjegyzékben és a SQL Server konfigurációban szereplő FileStream-beállításnak egyeznie kell         |
|VA1231     |A FileStream le kell tiltani (SQL)         |
|VA1234     |A gyakori feltételek beállítását engedélyezni kell         |
|VA1252     |A naplózott és központilag felügyelt események listája a kiszolgálói naplózási specifikációk használatával.         |
|VA1253     |A naplózott és központilag felügyelt adatbázis-hatókörű események listája a kiszolgálói naplózási specifikációk használatával         |
|VA1263     |A rendszeren lévő összes aktív naplózás listázása         |
|VA1266     |Az "MUST_CHANGE" beállítást minden SQL-bejelentkezéskor be kell állítani         |
|VA1276     |Az ügynök XPs-funkcióját le kell tiltani         |
|VA1286     |Az adatbázis-engedélyeket nem szabad közvetlenül a résztvevőknek megadni (objektum vagy oszlop).         |
|VA2000     |A rendszerbiztonsági tag minimális készletét magas hatású adatbázis-hatókörű engedélyeknek kell megadnia         |
|VA2001     |A rendszerbiztonsági tag minimális készletének nagy hatással kell lennie az adatbázis hatókörrel rendelkező objektumaira az objektumokra vagy oszlopokra vonatkozóan.         |
|VA2002     |A rendszerbiztonsági tag minimális készletének nagy hatással kell lennie az adatbázis hatókörön belüli engedélyeire a különböző biztonságos elemek migrálására         |
|VA2010     |A rendszerbiztonsági tag minimális készletét közepes hatású adatbázis-hatókörű engedélyeknek kell megadnia         |
|VA2021     |A rendszerbiztonsági tag minimális készletét az objektumokra vagy oszlopokra vonatkozó adatbázis-hatókörű MÓDOSÍTÁSi engedélyekkel kell megadni         |
|VA2022     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű MÓDOSÍTÁSi engedéllyel kell megadni a különböző biztonságos elemek migrálására         |
|VA2030     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű SELECT vagy EXECUTE engedélyekkel kell megadni         |
|VA2031     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű KIJELÖLÉSsel kell megadni          |
|VA2032     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű SELECT vagy EXECUTE engedélyekkel kell megadni a sémában         |
|VA2034     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű végrehajtási engedélyként kell megadni az XML-séma gyűjteményén         |
|VA2040     |A rendszerbiztonsági tag minimális készletét alacsony hatású adatbázis-hatókörű engedélyeknek kell megadnia         |
|VA2041     |A rendszerbiztonsági tag minimális készletét az objektumokra vagy oszlopokra vonatkozó, az adatbázis hatókörön belüli engedélyeinek alacsonyan kell megadnia.         |
|VA2042     |A rendszerbiztonsági tag minimális készletét alacsony hatású adatbázis-hatókörű engedélyeket kell biztosítani a sémában         |
|VA2050     |A rendszerbiztonsági tag minimális készletét kell megadni adatbázis-hatókörű VIEW DEFINITion engedélyekkel         |
|VA2051     |A rendszerbiztonsági tag minimális készletét az objektumokra vagy oszlopokra vonatkozó adatbázis-hatókörű VIEW DEFINITion engedélyekkel kell megadni         |
|VA2052     |A rendszerbiztonsági tag minimális készletét adatbázis-hatókörű MEGTEKINTÉSi engedélyként kell megadni a különböző biztonságos elemek migrálására         |
|VA2100     |A rendszerbiztonsági tag minimális készletét nagy hatású kiszolgáló-hatókörű engedélyeknek kell megadnia         |
|VA2101     |A rendszerbiztonsági tag minimális készletét közepes hatású kiszolgáló-hatókörű engedélyeknek kell megadnia         |
|VA2102     |A rendszerbiztonsági tag minimális készletének alacsony hatású kiszolgáló-hatókörű engedélyeket kell biztosítania         |
|VA2104     |A kiterjesztett tárolt eljárásokra vonatkozó végrehajtási engedélyeket vissza kell vonni a nyilvános         |
|VA2105     |A bejelentkezési jelszó nem lehet könnyen kitalálva         |
|VA2112     |Az Adatátalakítási szolgáltatások (DTS) nyilvános engedélyeit vissza kell vonni         |
|VA2115     |A rendszerbiztonsági tagok minimális készletének a közepes hatású rögzített kiszolgálói szerepköröknek kell lennie         |
|VA2123     |A "távelérés" funkciót le kell tiltani         |
|VA2127     |A "külső parancsfájlok" szolgáltatást le kell tiltani         |

## <a name="next-steps"></a>Következő lépések

- [Biztonsági rések felmérése](sql-vulnerability-assessment.md)
- [Az SQL sebezhetőségi felmérés szabályainak changelog](sql-database-vulnerability-assessment-rules-changelog.md)