---
title: SQL-sebezhetőségi felmérés
description: Ismerje meg, hogyan konfigurálhatja az SQL sebezhetőségi felmérést Azure SQL Database és hogyan értelmezheti az értékelési jelentéseket.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 04/19/2020
tags: azure-synapse
ms.openlocfilehash: 80629898b56f81fc738cb30df63766ea39adea6d
ms.sourcegitcommit: 849bb1729b89d075eed579aa36395bf4d29f3bd9
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 04/28/2020
ms.locfileid: "81684255"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>Az SQL sebezhetőségi felmérés segítséget nyújt az adatbázis-sebezhetőségek azonosításában

Az SQL sebezhetőségi felmérés egy könnyen konfigurálható szolgáltatás, amely képes felderíteni, nyomon követni és segíteni a lehetséges adatbázis-sebezhetőségeket. A használatával proaktívan növelhető az adatbázis biztonsága.

A sebezhetőségi felmérés a [fejlett adatbiztonsági](sql-database-advanced-data-security.md) ajánlat része, amely a speciális SQL-alapú biztonsági funkciók egységes csomagja. A biztonsági rések felmérése a központi SQL Advanced Security portálon keresztül érhető el és kezelhető.

> [!NOTE]
> A sebezhetőségi felmérés Azure SQL Database, Azure SQL Database felügyelt példány és az Azure szinapszis Analytics esetében támogatott. Az egyszerűség kedvéért a jelen cikk SQL Database a felügyelt adatbázis-szolgáltatások bármelyikére hivatkozik.

## <a name="vulnerability-assessment"></a>Sebezhetőségi felmérés

Az SQL sebezhetőségi felmérés egy olyan szolgáltatás, amely láthatóságot biztosít a biztonsági állapotában. A biztonsági rések felmérése a biztonsági problémák megoldásához és az adatbázis biztonságának javításához szükséges lépéseket tartalmazza. A következőket teheti: 

- Tekintse meg az adatbázis-ellenőrzési jelentéseket igénylő megfelelőségi követelményeket.
- Ismerje meg az adatvédelmi szabványokat.
- Dinamikus adatbázis-környezet figyelése, amelyben a változások nehezen követhetők.

A sebezhetőségi felmérés egy Azure SQL Database beépített ellenőrzési szolgáltatás. A szolgáltatás a biztonsági réseket jelző szabályok tudásbázisát alkalmazza. Kiemeli az ajánlott eljárásoktól való eltéréseket, például a helytelen konfigurációkat, a túlzott engedélyeket és a nem védett bizalmas adatokat.

A szabályok a Microsoft ajánlott eljárásain alapulnak, és olyan biztonsági problémákra összpontosítanak, amelyek a legnagyobb kockázatokat jelentik az adatbázis és értékes adatai számára. Ezek kiterjednek az adatbázis-szintű problémákra és a kiszolgálói szintű biztonsági problémákra, például a kiszolgáló tűzfalának beállításaira és a kiszolgálói szintű engedélyekre. Ezek a szabályok számos, a megfelelőségi szabványoknak megfelelő szabályozási szervtől származó követelményt is jelentenek.

A vizsgálat eredményei közé tartozik az egyes problémák megoldásához szükséges műveletek végrehajtása, valamint a testreszabott szervizelési parancsfájlok megadása, ha vannak ilyenek. A környezethez tartozó értékelési jelentéseket a következő elfogadható alapkonfiguráció beállításával szabhatja testre:
* Engedélyezési konfigurációk.
* Szolgáltatás-konfigurációk.
* Adatbázis-beállítások.

## <a name="implement-vulnerability-assessment"></a>Sebezhetőségi felmérés implementálása

A következő lépések a sebezhetőségi felmérés megvalósítását SQL Database.

### <a name="1-run-a-scan"></a>1. vizsgálat futtatása

A Azure SQL Database ablaktáblán, a **Biztonság** fejléc alatt válassza a **speciális adatbiztonság**lehetőséget. Ezután kattintson a **tárterület kiválasztása** lehetőségre a **sebezhetőségi felmérés** ablaktáblán a biztonsági rések felmérése beállítások ablaktábla megnyitásához a teljes SQL Server-kiszolgálón.

Olyan Storage-fiók konfigurálása, amelyben a rendszer a kiszolgálón található összes adatbázis vizsgálatának eredményeit fogja tárolni. További információ a Storage-fiókokról: [Tudnivalók az Azure Storage-fiókokról](../storage/common/storage-create-storage-account.md). A tárterület beállítása után válassza a **vizsgálat** lehetőséget az adatbázis biztonsági rések vizsgálatához.

![Adatbázis vizsgálata](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > A vizsgálat könnyű és biztonságos. A Futtatás néhány másodpercig tart, és a teljes egészében írásvédett. Nem végez semmilyen módosítást az adatbázisban.

### <a name="2-view-the-report"></a>2. a jelentés megtekintése

Ha a vizsgálat elkészült, a vizsgálati jelentés automatikusan megjelenik a Azure Portal. A jelentés áttekintést nyújt a biztonsági állapotáról. Azt is felsorolja, hogy hány problémát észlelt a rendszer, és hogy milyen problémák merültek fel. Az eredmények közé tartoznak az ajánlott eljárásoktól való eltérések, valamint a biztonsággal kapcsolatos beállítások pillanatképe, például az adatbázis-rendszerbiztonsági tag és a szerepkörök, valamint a hozzájuk tartozó engedélyek. A vizsgálati jelentés az adatbázisban felderített bizalmas adatok térképét is tartalmazza. Ajánlásokat tartalmaz az [adatfelderítés és-besorolás](sql-database-data-discovery-and-classification.md)használatával történő besorolásra.

![A jelentés megtekintése](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. az eredmények elemzése és a problémák megoldása

Tekintse át az eredményeket, és határozza meg a jelentés azon eredményeit, amelyek a környezetében igaz biztonsági problémák. Az egyes sikertelen eredmények részletezésével megismerheti a keresés hatását, valamint azt, hogy miért nem sikerült az egyes biztonsági ellenőrzések végrehajtása. A probléma megoldásához használja a jelentés által biztosított végrehajtandó szervizelési információkat.

![A jelentés elemzése](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Állítsa be az alaptervet

Az értékelés eredményeinek áttekintése során megadhatja, hogy az *eredmények a környezetében elfogadható* alapkonfigurációként legyenek megjelölve. Az alapterv alapvetően az eredmények jelentésének testreszabása. Az alapkonfigurációnak megfelelő eredmények a későbbi vizsgálatokban való továbbításnak tekintendők. Az alapkonfiguráció biztonsági állapotának megállapítása után a sebezhetőségi felmérés csak az alaptervtől való eltérésekről készít jelentést. Így a kapcsolódó problémákra koncentrálhat.

![Az Alapterv beállítása](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. új vizsgálat futtatása a testreszabott követési jelentés megtekintéséhez

Miután befejezte a **szabályok alaptervének**beállítását, egy új vizsgálat futtatásával tekintheti meg a testreszabott jelentést. A sebezhetőségi felmérés most csak azokat a biztonsági problémákat jelenti, amelyek eltérnek a jóváhagyott alapkonfigurációtól.

![Testreszabott jelentés megtekintése](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

A sebezhetőségi felmérés mostantól nyomon követhető, hogy az adatbázis folyamatosan magas szintű biztonságot tart fenn, és a szervezeti szabályzatok teljesülnek. Ha megfelelőségi jelentések szükségesek, a sebezhetőségi felmérési jelentések hasznosak lehetnek a megfelelőségi folyamat megkönnyítése érdekében.

### <a name="6-set-up-periodic-recurring-scans"></a>6. rendszeres ismétlődő vizsgálatok beállítása

Nyissa meg a sebezhetőség-felmérési beállításokat az **időszakos ismétlődő vizsgálatok**bekapcsolásához. Ez a beállítás úgy konfigurálja a sebezhetőségi felmérést, hogy hetente egyszer automatikusan futtasson vizsgálatot az adatbázison. A rendszer a megadott e-mail-címekre küldi el a vizsgálat eredményének összegzését.

![Testreszabott jelentés megtekintése](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Assessment-jelentés exportálása

Válassza a **vizsgálati eredmények exportálása** lehetőséget a vizsgálati eredmény letölthető Excel-jelentésének létrehozásához. Ez a jelentés egy Összegzés fület tartalmaz, amely az értékelés összegzését jeleníti meg. A jelentés tartalmazza az összes sikertelen ellenőrzést. Emellett tartalmaz egy **Results (eredmények** ) lapot is, amely az eredmények teljes készletét tartalmazza a vizsgálatból. Az eredmények tartalmazzák az összes futtatott ellenőrzést, valamint az eredmény részleteit.

### <a name="8-view-scan-history"></a>8. a vizsgálati előzmények megtekintése

A biztonsági rések felmérése ablaktáblán válassza a **vizsgálat előzményei** lehetőséget, hogy megtekintse az adatbázison korábban futtatott összes vizsgálat előzményeit. Válasszon ki egy adott vizsgálatot a listában a vizsgálat részletes eredményeinek megtekintéséhez.

A sebezhetőségi felmérés mostantól nyomon követhető, hogy az adatbázis folyamatosan magas szintű biztonságot tart fenn, és a szervezeti szabályzatok teljesülnek. Ha megfelelőségi jelentések szükségesek, a sebezhetőségi felmérési jelentések hasznosak lehetnek a megfelelőségi folyamat megkönnyítése érdekében.

## <a name="manage-vulnerability-assessments-by-using-azure-powershell"></a>Sebezhetőségi felmérések kezelése Azure PowerShell használatával

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> Az Azure SQL Database továbbra is támogatja a PowerShell Azure Resource Manager modult, de a jövőbeli fejlesztés az az. SQL-modulhoz készült. Ezekhez a parancsmagokhoz lásd: [AzureRM. SQL](https://docs.microsoft.com/powershell/module/AzureRM.Sql/). Az az modul és a AzureRm modulok parancsainak argumentumai lényegében azonosak.

Azure PowerShell parancsmagokkal programozott módon kezelheti a sebezhetőségi felméréseket. A támogatott parancsmagok a következők:

| Parancsmag neve hivatkozásként | Leírás |
| :-------------------- | :---------- |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Törli a sebezhetőségi felmérési szabály alaptervét.<br/>Először állítsa be az alaptervet, mielőtt ezt a parancsmagot használja a törléshez. |
| [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting) | Törli egy adatbázis sebezhetőség-felmérési beállításait. |
| [Átalakítás – AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan) | A biztonsági rések felmérésének eredményeinek konvertálása Excel-fájlba. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Beolvassa egy adott szabály biztonsági rések értékelési szabályának alaptervét. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord) | Az adott adatbázishoz tartozó összes sebezhetőségi felmérési vizsgálati rekord beolvasása. |
| [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting) | Egy adatbázis sebezhetőség-értékelési beállításait adja vissza. |
| [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline) | Beállítja a sebezhetőségi felmérési szabály alaptervét. |
| [Start – AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan) | Elindítja a sebezhetőségi felmérések vizsgálatának kezdetét. |
| [Frissítés – AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting) | Frissíti egy adatbázis sebezhetőség-felmérési beállításait. |
| &nbsp; | &nbsp; |

A parancsfájl-példákat lásd: az [Azure SQL sebezhetőségi felmérés PowerShell-támogatása](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="manage-vulnerability-assessment-baseline-rules-by-using-resource-manager-templates"></a>A sebezhetőségi felmérés alapszabályainak kezelése Resource Manager-sablonok használatával

A sebezhetőségi felmérés alapkonfigurációinak Azure Resource Manager sablonok használatával történő konfigurálásához `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` használja a típust.

Az alaptervek hozzáadása `vulnerabilityAssessments` előtt győződjön meg arról, hogy engedélyezve van a SQL Server rendszert futtató számítógépen.

Az alábbi példa egy Resource Manager-sablonban található masterdb-és VA1143-VA2065 vonatkozó alapkonfiguráció-szabály definiálására mutat példát:

```json
   "resources": [
      {
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "FirewallRuleName3",
                     "StartIpAddress",
                     "EndIpAddress"
                  ]
               },
               {
                  "result": [
                     "FirewallRuleName4",
                     "62.92.15.68",
                     "62.92.15.68"
                  ]
               }
            ]
         },
         "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
         "apiVersion": "2018-06-01-preview",
         "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
         "dependsOn": [
            "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
         ],
         "properties": {
            "baselineResults": [
               {
                  "result": [
                     "dbo"
                  ]
               }
            ]
         }
      }
   ]
```

A Master adatbázis és a felhasználói adatbázis esetében az erőforrások nevei eltérően vannak definiálva:

* Master Database – "Name": "[Összefűzés (parameters (' server_name '), '/', parameters (' database_name '), '/default/VA2065/<b>Master</b>')]
* Felhasználói adatbázis – "név": "[Összefűzés (parameters (' server_name '), '/', parameters (' database_name '), '/default/VA2065/<b>default</b>')]",
 
 
 A logikai típusok igaz/hamis értékre való kezeléséhez állítsa az alapkonfiguráció eredményét bináris bemenetként, például: "1"/"0".
 
```json
   {
      "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
      "apiVersion": "2018-06-01-preview",
      "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",

      "dependsOn": [
         "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
      ],

      "properties": {
         "baselineResults": [
            {
               "result": [
                  "1"
               ]
            }
         ]
      }

   }
```

## <a name="next-steps"></a>További lépések  

- További információ a [speciális adatbiztonságról](sql-database-advanced-data-security.md).
- További információ az [adatfelderítésről és a besorolásról](sql-database-data-discovery-and-classification.md).
