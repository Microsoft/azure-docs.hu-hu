---
title: SQL-sebezhetőségi felmérés
description: Ismerje meg, hogyan konfigurálhatja és tekintheti meg az SQL sebezhetőségi felmérést SQL Databaseon, és hogyan értelmezheti az értékelési jelentéseket.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 03/12/2019
ms.openlocfilehash: 84503748e9a0da9448bdeaace0d78d82bd687181
ms.sourcegitcommit: 64def2a06d4004343ec3396e7c600af6af5b12bb
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/19/2020
ms.locfileid: "77471263"
---
# <a name="sql-vulnerability-assessment-service-helps-you-identify-database-vulnerabilities"></a>Az SQL sebezhetőség-felmérési szolgáltatás segítséget nyújt az adatbázis-sebezhetőségek azonosításában

Az SQL sebezhetőségi felmérés egy könnyen konfigurálható szolgáltatás, amely felderítheti, nyomon követheti és javíthatja a lehetséges adatbázis-réseket. A használatával proaktívan növelhető az adatbázis biztonsága.

A sebezhetőségi felmérés a [fejlett adatbiztonsági](sql-database-advanced-data-security.md) (ADS) ajánlat része, amely a speciális SQL-alapú biztonsági funkciók egységes csomagja. A sebezhetőségi felmérés a központi SQL ADS portálon keresztül érhető el és kezelhető.

> [!NOTE]
> A sebezhetőségi felmérés a Azure SQL Database, az Azure SQL felügyelt példánya és a Azure SQL Data Warehouse esetében támogatott. Az egyszerűség kedvéért a jelen cikk SQL Database a felügyelt adatbázis-szolgáltatások bármelyikére hivatkozik.

## <a name="the-vulnerability-assessment-service"></a>A sebezhetőség-felmérési szolgáltatás

Az SQL sebezhetőségi felmérés (VA) egy olyan szolgáltatás, amely betekintést nyújt a biztonsági állapotba, és a biztonsági problémák megoldásához használható lépéseket, valamint az adatbázis biztonságának javítását is lehetővé teszi. A következőket teheti:  

- Tekintse meg az adatbázis-ellenőrzési jelentéseket igénylő megfelelőségi követelményeket.  
- Ismerje meg az adatvédelmi szabványokat.  
- Dinamikus adatbázis-környezet figyelése, amelyben a változások nehezen követhetők.  

A sebezhetőségi felmérés a Azure SQL Database szolgáltatásba beépített ellenőrzési szolgáltatás. A szolgáltatás olyan szabályok tudásbázisát alkalmazza, amelyek a biztonsági réseket megjelölik, és kiemelik az ajánlott eljárásoktól való eltéréseket, például a helytelen konfigurációkat, a túlzott engedélyeket és a nem védett bizalmas adatokat. A szabályok a Microsoft ajánlott eljárásain alapulnak, és olyan biztonsági problémákra összpontosítanak, amelyek a legnagyobb kockázatokat jelentik az adatbázis és értékes adatai számára. Ezek az adatbázis-szintű problémákra, valamint a kiszolgálói szintű biztonsági problémákra, például a kiszolgálói tűzfal beállításaira és a kiszolgálói szintű engedélyekre is kiterjednek. Ezek a szabályok számos, a megfelelőségi szabványoknak megfelelő szabályozási szervtől származó követelményt is jelentenek.  

A vizsgálat eredményei közé tartozik az egyes problémák megoldásához szükséges műveletek végrehajtása, valamint a testreszabott szervizelési parancsfájlok megadása, ha vannak ilyenek. Az értékelési jelentés testreszabható a környezethez az engedélyek konfigurációjának, a funkciók konfigurációjának és az adatbázis-beállításoknak egy elfogadható alaptervének beállításával.

## <a name="implementing-vulnerability-assessment"></a>Sebezhetőségi felmérés megvalósítása

A következő lépések a VA-t implementálják SQL Databaseon.  

### <a name="1-run-a-scan"></a>1. vizsgálat futtatása  

Ismerkedjen meg a VA-vel, ha a Azure SQL Database panel biztonsági fejléce alatt navigáljon a **speciális adatbiztonság** elemre. Kattintson ide a speciális adatbiztonság engedélyezéséhez, majd kattintson a **tároló kiválasztása** vagy a **sebezhetőség-felmérési** kártya lehetőségre, amely automatikusan megnyitja a sebezhetőség-felmérési beállítások kártyát a teljes SQL Server-kiszolgáló számára.

Először konfigurálja azt a Storage-fiókot, amelybe a rendszer a kiszolgálón található összes adatbázis vizsgálati eredményeit tárolja. További információ a Storage-fiókokról: [Tudnivalók az Azure Storage-fiókokról](../storage/common/storage-create-storage-account.md). A tárterület konfigurálása után kattintson a **vizsgálat** gombra az adatbázis biztonsági rések vizsgálatához.
  
![Adatbázis vizsgálata](./media/sql-vulnerability-assessment/pp_va_initialize.png)  

  > [!NOTE]
  > A vizsgálat könnyű és biztonságos. Eltarthat néhány másodpercig, és teljes egészében csak olvasható. Nem végez semmilyen módosítást az adatbázisban.  

### <a name="2-view-the-report"></a>2. a jelentés megtekintése

Ha a vizsgálat befejeződött, a vizsgálati jelentés automatikusan megjelenik a Azure Portal. A jelentés áttekintést nyújt a biztonsági állapotáról: hány problémát észlelt a rendszer, és hogy hány probléma merült fel. Az eredmények közé tartoznak az ajánlott eljárásoktól való eltérések, valamint a biztonsággal kapcsolatos beállítások pillanatképe, például az adatbázis-rendszerbiztonsági tag és a szerepkörök, valamint a hozzájuk tartozó engedélyek. A vizsgálati jelentés az adatbázisban felderített bizalmas adatok térképét is tartalmazza, és ajánlásokat tartalmaz az adatoknak az [adatfelderítési & besorolással](sql-database-data-discovery-and-classification.md)való osztályozására.

![A jelentés megtekintése](./media/sql-vulnerability-assessment/pp_main_getstarted.png)  

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. az eredmények elemzése és a problémák megoldása

Tekintse át az eredményeket, és határozza meg a jelentés azon eredményeit, amelyek a környezetében igaz biztonsági problémák. Az egyes sikertelen eredmények részletezésével megismerheti a keresés hatását, valamint azt, hogy miért nem sikerült az egyes biztonsági ellenőrzések végrehajtása. A probléma megoldásához használja a jelentés által biztosított végrehajtandó szervizelési információkat.  

![A jelentés elemzése](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Állítsa be az alaptervet

Az értékelés eredményeinek áttekintése során megadhatja, hogy az *eredmények a környezetében elfogadható* alapkonfigurációként legyenek megjelölve. Az alapterv alapvetően az eredmények jelentésének testreszabása. Az alapkonfigurációnak megfelelő eredmények a későbbi vizsgálatokban való továbbításnak tekintendők. Az alapkonfiguráció biztonsági állapotának megállapítása után a VA csak az alaptervtől való eltéréseket jelenti, és a kapcsolódó problémákra koncentrálhat.  

![Az Alapterv beállítása](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)  

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. új vizsgálat futtatása a testreszabott követési jelentés megtekintéséhez

A **szabályok**alapkonfigurációinak beállítása után futtasson egy új vizsgálatot a testreszabott jelentés megtekintéséhez. A VA most csak azokat a biztonsági problémákat jelenti, amelyek eltérnek a jóváhagyott alapkonfigurációtól.

![Testreszabott jelentés megtekintése](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)  

A sebezhetőségi felmérés mostantól nyomon követhető, hogy az adatbázis folyamatosan magas szintű biztonságot tart fenn, és a szervezeti szabályzatok teljesülnek. Ha megfelelőségi jelentések szükségesek, a VA-jelentések hasznosak lehetnek a megfelelőségi folyamat megkönnyítésére.  

### <a name="6-set-up-periodic-recurring-scans"></a>6. rendszeres ismétlődő vizsgálatok beállítása

Navigáljon a sebezhetőség-felmérési beállításokhoz az **időszakos ismétlődő vizsgálatok**bekapcsolásához. Ez úgy állítja be a sebezhetőségi felmérést, hogy hetente egyszer automatikusan futtasson vizsgálatot az adatbázison. A rendszer az Ön által megadott e-mail-címre küldi el a vizsgálat eredményének összegzését.

![Testreszabott jelentés megtekintése](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Assessment-jelentés exportálása

Kattintson a **vizsgálati eredmények exportálása** lehetőségre a vizsgálati eredmény letölthető Excel-jelentésének létrehozásához. Ez a jelentés egy Összegzés fület tartalmaz, amely az értékelés összegzését jeleníti meg, beleértve az összes sikertelen ellenőrzést is. Emellett tartalmaz egy **Results (eredmények** ) fület is, amely a vizsgálat eredményének teljes készletét tartalmazza, beleértve a futtatott ellenőrzéseket és az egyes adatok eredményének részleteit.

### <a name="8-view-scan-history"></a>8. a vizsgálati előzmények megtekintése

Kattintson a **keresési előzmények** lehetőségre a VA panelen az ezen az adatbázison korábban futtatott ellenőrzések előzményeinek megtekintéséhez. Válasszon ki egy adott vizsgálatot a listában a vizsgálat részletes eredményeinek megtekintéséhez.

A sebezhetőségi felmérés mostantól nyomon követhető, hogy az adatbázis folyamatosan magas szintű biztonságot tart fenn, és a szervezeti szabályzatok teljesülnek. Ha megfelelőségi jelentések szükségesek, a VA-jelentések hasznosak lehetnek a megfelelőségi folyamat megkönnyítésére.

## <a name="manage-vulnerability-assessments-using-azure-powershell"></a>Sebezhetőségi felmérések kezelése Azure PowerShell használatával

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> Az Azure SQL Database továbbra is támogatja a PowerShell Azure Resource Manager modult, de a jövőbeli fejlesztés az az. SQL-modulhoz készült. Ezekhez a parancsmagokhoz lásd: [AzureRM. SQL](https://docs.microsoft.com/powershell/module/AzureRM.Sql/). Az az modul és a AzureRm modulok parancsainak argumentumai lényegében azonosak.

Azure PowerShell parancsmagokkal programozott módon kezelheti a sebezhetőségi felméréseket. A támogatott parancsmagok a következők:

- [Frissítés – AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting)

  Egy adatbázis sebezhetőség-felmérési beállításainak frissítése
- [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting)

  Egy adatbázis sebezhetőség-értékelési beállításait adja vissza.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting)

  Egy adatbázis sebezhetőségi felmérési beállításainak törlése
- [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Beállítja a sebezhetőségi felmérési szabály alaptervét.
- [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Beolvassa egy adott szabály biztonsági rések értékelési szabályának alaptervét.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Törli a sebezhetőségi felmérési szabály alaptervét. Először állítsa be az alaptervet, mielőtt ezt a parancsmagot használja a törléshez.
- [Start – AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan)

  Elindítja a sebezhetőségi felmérések vizsgálatának kezdetét
- [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord)

   Az adott adatbázishoz társított összes sebezhetőségi felmérési rekord (ok) beolvasása.
- [Átalakítás – AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan)

  A biztonsági rések felmérésének eredményeinek konvertálása Excel-fájlba

A parancsfájl-példákat lásd: az [Azure SQL sebezhetőségi felmérés PowerShell-támogatása](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/).

## <a name="manage-vulnerability-assessments-baseline-rules-using-resource-manager-templates"></a>A sebezhetőségi felmérések alapszabályait Resource Manager-sablonok használatával kezelheti

A sebezhetőségi felmérés alapkonfigurációinak Azure Resource Manager sablonok használatával történő konfigurálásához használja a `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` típust.

Az alaptervek hozzáadása előtt győződjön meg arról, hogy engedélyezte a vulnerabilityAssements a SQL Server rendszert futtató számítógépen.

Az alábbi példa egy Resource Manager-sablonban található masterdb-és VA1143-másolás leállításakor való-re vonatkozó alapszabály-VA2065 definiálására mutat példát:

```json
    "resources": [
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                                "FirewallRuleName3",
                                "StartIpAddress",
                                "EndIpAddress"
                                  ]
                    },{
                         "result": [
                                "FirewallRuleName4",
                                "62.92.15.68",
                                "62.92.15.68"
                            ]
                        
                    }
                ]
            },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "dbo"
                        ]
                    }
                ]
            }
        }
    ]
}   
```

A felhasználói adatbázis és a főadatbázis esetében az erőforrások nevei eltérően vannak definiálva:

* Master Database – "Name": "[Összefűzés (parameters (' server_name '), '/', parameters (' database_name '), '/default/VA2065/<b>Master</b>')]
* Felhasználói adatbázis – "név": "[Összefűzés (parameters (' server_name '), '/', parameters (' database_name '), '/default/VA2065/<b>default</b>')]",
 
 
 A <b>logikai</b> típusok igaz/hamis értékre való kezeléséhez állítsa az alapkonfiguráció eredményét bináris bemenetként, például: "1"/"0".
 
 ```json
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "1"
                        ]
                    }
                ]
            }
        }
    ]
}   
```
 
 
## <a name="next-steps"></a>Következő lépések  

- További információ a [speciális adatbiztonságról](sql-database-advanced-data-security.md)
- További tudnivalók az [adatfelderítési & besorolásáról](sql-database-data-discovery-and-classification.md)
