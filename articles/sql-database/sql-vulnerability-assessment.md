---
title: SQL-sebezhetőségi felmérés
description: Ismerje meg, hogyan konfigurálhatja az SQL biztonsági rés felmérése az Azure SQL Database és értelmezi az értékelési jelentések.
services: sql-database
ms.service: sql-database
ms.subservice: security
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: mibar
ms.author: mibar
ms.reviewer: vanto, carlrab
ms.date: 02/05/2020
tags: azure-synapse
ms.openlocfilehash: a54cbb017e85ec10e142ffae8981bc839aac37f4
ms.sourcegitcommit: 2ec4b3d0bad7dc0071400c2a2264399e4fe34897
ms.translationtype: MT
ms.contentlocale: hu-HU
ms.lasthandoff: 03/28/2020
ms.locfileid: "80061665"
---
# <a name="sql-vulnerability-assessment-helps-you-identify-database-vulnerabilities"></a>Az SQL biztonsági résfelmérése segít az adatbázis biztonsági rései azonosításában

Az SQL biztonsági résfelmérésegy könnyen konfigurálható szolgáltatás, amely képes felderíteni, nyomon követni és segíteni az adatbázis esetleges biztonsági réseielhárításában. A használatával proaktívan növelhető az adatbázis biztonsága.

A biztonsági rés felmérése a [speciális adatbiztonsági](sql-database-advanced-data-security.md) ajánlat része, amely egy egységes csomag a fejlett SQL biztonsági képességekhez. A biztonsági rés felmérése a központi SQL Advanced Data Security portálon keresztül érhető el és kezelhető.

> [!NOTE]
> A biztonsági rés felmérése az Azure SQL Database, az Azure SQL Database felügyelt példánya és az Azure Synapse Analytics számára támogatott. Az egyszerűség kedvéért az SQL Database ebben a cikkben használatos, amikor a felügyelt adatbázis-szolgáltatások bármelyikére hivatkozik.

## <a name="vulnerability-assessment"></a>Sebezhetőségi felmérés

Az SQL biztonsági rés felmérése olyan szolgáltatás, amely betekintést nyújt a biztonsági állapotba. A biztonsági rés felmérése a biztonsági problémák megoldásához és az adatbázis biztonságának növeléséhez szükséges lépéseket tartalmaz. Ez segíthet: 

- Megfelelaz adatbázis-vizsgálati jelentéseket igénylő megfelelőségi követelményeknek.
- Feleljen meg az adatvédelmi szabványoknak.
- Dinamikus adatbázis-környezet figyelése, ahol a változások nehezen követhetőek.

A biztonsági rés felmérése az Azure SQL Database beépített vizsgálati szolgáltatása. A szolgáltatás olyan szabályok tudásbázisát alkalmazza, amelyek megjelölik a biztonsági réseket. Kiemeli az ajánlott eljárásoktól való eltéréseket, például a helytelen konfigurációkat, a túlzott engedélyeket és a nem védett bizalmas adatokat.

A szabályok a Microsoft bevált gyakorlatain alapulnak, és azokra a biztonsági kérdésekre összpontosítanak, amelyek a legnagyobb kockázatot jelentik az adatbázisra és annak értékes adataira. Ezek az adatbázisszintű problémákat és a kiszolgálószintű biztonsági problémákat fedik le, például a kiszolgáló tűzfalbeállításait és a kiszolgálószintű engedélyeket. Ezek a szabályok a különböző szabályozó szervek számos követelményét is képviselik a megfelelőségi előírásoknak való megfelelés érdekében.

A vizsgálat eredményei között vannak végrehajtható lépések az egyes problémák megoldásához, és adott esetben személyre szabott javítási parancsfájlok biztosításához. Az értékelési jelentést a környezetéhez testreszabhatja, ha elfogadható alaptervet állít be a következőkre:
* Engedélykonfigurációk.
* Jellemzőkonfigurációk.
* Adatbázis-beállítások.

## <a name="implement-vulnerability-assessment"></a>Biztonsági rés felmérésének végrehajtása

A következő lépések megvalósítják a biztonsági rés felmérését az SQL Database-en.

### <a name="1-run-a-scan"></a>1. Vizsgálat futtatása

Az Azure SQL Database pane **Biztonsági** fejlécében válassza a **Speciális adatbiztonság**lehetőséget. Ezután kattintson a **Tároló kiválasztása** elemre a **Biztonsági rés felmérése** ablaktáblán a teljes SQL-kiszolgáló biztonsági résfelmérési beállításai ablaktáblájának megnyitásához.

Konfiguráljon egy tárfiókot, ahol a kiszolgálón lévő összes adatbázis vizsgálati eredményei tárolódnak. A tárfiókokról az [Azure storage-fiókok – további](../storage/common/storage-create-storage-account.md)információ. A tárolás konfigurálása után válassza **a Bekés ez** lehetőséget az adatbázis biztonsági rései szempontjából való vizsgálathoz.

![Adatbázis bevizsgálata](./media/sql-vulnerability-assessment/pp_va_initialize.png)

  > [!NOTE]
  > A vizsgálat könnyű és biztonságos. Néhány másodpercet vesz igénybe a futtatás, és teljesen csak olvasható. Nem módosítja az adatbázist.

### <a name="2-view-the-report"></a>2. A jelentés megtekintése

Amikor a vizsgálat befejeződött, a bekéselt jelentés automatikusan megjelenik az Azure Portalon. A jelentés áttekintést nyújt a biztonsági állapotról. Felsorolja, hogy hány kérdést találtak, és azok megfelelő severities. Az eredmények közé tartoznak az ajánlott eljárásoktól való eltérésekre vonatkozó figyelmeztetések, valamint a biztonsággal kapcsolatos beállítások, például az adatbázis-tagok és szerepkörök, valamint a hozzájuk tartozó engedélyek pillanatképe. A bekéselt jelentés az adatbázisban felderített bizalmas adatok térképét is tartalmazza. Javaslatokat tartalmaz az adatok [adatfelderítés és -besorolás](sql-database-data-discovery-and-classification.md)használatával történő besorolására.

![A jelentés megtekintése](./media/sql-vulnerability-assessment/pp_main_getstarted.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3. Elemezze az eredményeket és oldja meg a problémákat

Tekintse át az eredményeket, és határozza meg a jelentésazon megállapításait, amelyek valódi biztonsági problémák a környezetben. Részletezze az egyes sikertelen eredményeket, hogy megértse a keresés hatását, és miért nem sikerült az egyes biztonsági ellenőrzés. A probléma megoldásához használja a jelentés által biztosított, végrehajtható javítási információkat.

![A jelentés elemzése](./media/sql-vulnerability-assessment/pp_fail_rule_show_remediation.png)

### <a name="4-set-your-baseline"></a>4. Állítsa be az alapvonalat

Az értékelési eredmények áttekintése során megjelölheti a konkrét eredményeket elfogadható *alapkonfigurációként* a környezetében. Az alapterv lényegében az eredmények jelentésének testreszabása. Az alapvonalnak megfelelő eredményeket a későbbi vizsgálatok során átadottnak tekintik. Az alapszintű biztonsági állapot létrehozása után a biztonsági rés felmérése csak az alapkonfigurációtól való eltérésekről számol be. Ily módon, akkor összpontosítani a figyelmet a vonatkozó kérdéseket.

![Az alapterv beállítása](./media/sql-vulnerability-assessment/pp_fail_rule_show_baseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5. Futtasson egy új vizsgálat, hogy a személyre szabott követési jelentés

Miután befejezte a **szabályalaptervek**beállítását, futtasson egy új vizsgálattal a testreszabott jelentés megtekintéséhez. A biztonsági rés felmérése mostantól csak azon biztonsági problémákat jelenti, amelyek eltérnek a jóváhagyott alapállapottól.

![A testreszabott jelentés megtekintése](./media/sql-vulnerability-assessment/pp_pass_main_with_baselines.png)

A biztonsági rés felmérése mostantól annak figyelésére használható, hogy az adatbázis mindig magas szintű biztonságot tart-e fenn, és hogy a szervezeti házirendek teljesülnek-e. Ha megfelelőségi jelentésekre van szükség, a biztonsági résfelmérési jelentések hasznosak lehetnek a megfelelőségi folyamat megkönnyítése érdekében.

### <a name="6-set-up-periodic-recurring-scans"></a>6. Rendszeres ismétlődő vizsgálatok beállítása

Az **időszakos ismétlődő vizsgálatok**bekapcsolását a Biztonsági rés felmérése beállításaival kapcsolhatja be. Ez a beállítás úgy konfigurálja a biztonsági rés felmérését, hogy hetente egyszer automatikusan futtasson egy vizsgálaton az adatbázisban. A bekéseredmény összegzését a rendszer elküldi az Ön által megadott e-mail címekre.

![A testreszabott jelentés megtekintése](./media/sql-vulnerability-assessment/pp_recurring_scans.png)

### <a name="7-export-an-assessment-report"></a>7. Értékelő jelentés exportálása

A **Bevizsgálati eredmények exportálása lehetőséget** választva letölthető Excel-jelentést hozhat létre a vizsgálat eredményéről. Ez a jelentés egy összefoglaló lapot tartalmaz, amely az értékelés összegzését jeleníti meg. A jelentés tartalmazza az összes sikertelen ellenőrzést. Tartalmaz egy **Eredmények** lapot is, amely a vizsgálat teljes eredményeit tartalmazza. Az eredmények tartalmazzák az összes futtatott ellenőrzést és az egyes eredmények részleteit.

### <a name="8-view-scan-history"></a>8. A bekéstörténet megtekintése

Válassza a Biztonsági rés felmérése ablaktábla **Beolvasási előzmények választóját** az adatbázisban korábban futtatott összes vizsgálat előzményeinek megtekintéséhez. A vizsgálat részletes eredményeinek megtekintéséhez jelöljön ki egy adott betekintést a listában.

A biztonsági rés felmérése mostantól annak figyelésére használható, hogy az adatbázis mindig magas szintű biztonságot tart-e fenn, és hogy a szervezeti házirendek teljesülnek-e. Ha megfelelőségi jelentésekre van szükség, a biztonsági résfelmérési jelentések hasznosak lehetnek a megfelelőségi folyamat megkönnyítése érdekében.

## <a name="manage-vulnerability-assessments-by-using-azure-powershell"></a>A biztonsági rések felmérésének kezelése az Azure PowerShell használatával

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]
> [!IMPORTANT]
> A PowerShell Azure Resource Manager modul továbbra is támogatja az Azure SQL Database, de minden jövőbeli fejlesztés az Az.Sql modul. Ezekről a parancsmagokról az [AzureRM.Sql](https://docs.microsoft.com/powershell/module/AzureRM.Sql/)című témakörben található. Az Az modulban és az AzureRm-modulokban lévő parancsok argumentumai lényegében azonosak.

Az Azure PowerShell-parancsmagokkal programozott módon kezelheti a biztonsági résfelméréseit. A támogatott parancsmagok a következők:

- [Update-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Update-azSqlDatabaseVulnerabilityAssessmentSetting)

  Frissíti az adatbázis biztonsági résértékelési beállításait.
- [Get-AzSqlDatabaseVulnerabilityAssessmentSetting](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentSetting)

  Egy adatbázis biztonsági résértékelési beállításait adja eredményül.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentSetting (Clear-AzSqlDatabaseVulnerabilityAssessmentSetting)](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentSetting)

  Törli az adatbázis biztonsági résértékelési beállításait.
- [Set-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Set-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Beállítja a biztonsági rés értékelési szabályának alapkonfigurációja.
- [Get-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Lekéri a biztonsági rés értékelési szabály alapvonalát egy adott szabályhoz.
- [Clear-AzSqlDatabaseVulnerabilityAssessmentRuleBaseline](https://docs.microsoft.com/powershell/module/az.sql/Clear-azSqlDatabaseVulnerabilityAssessmentRuleBaseline)

  Törli a biztonsági résértékelési szabály alapkonfigurációját. Először állítsa be az alapvonalat, mielőtt ezzel a parancsmagpal törölne.
- [Start-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Start-azSqlDatabaseVulnerabilityAssessmentScan)

  A biztonsági rés felmérésének kezdetét indítja el.
- [Get-AzSqlDatabaseVulnerabilityAssessmentScanRecord](https://docs.microsoft.com/powershell/module/az.sql/Get-azSqlDatabaseVulnerabilityAssessmentScanRecord)

   Leveszi az adott adatbázishoz tartozó összes biztonsági résfelmérési rekordot.
- [Convert-AzSqlDatabaseVulnerabilityAssessmentScan](https://docs.microsoft.com/powershell/module/az.sql/Convert-azSqlDatabaseVulnerabilityAssessmentScan)

  A biztonsági résfelmérés eredményeit Excel-fájllá alakítja.

Egy parancsfájl példa: [Azure SQL biztonsági rés felmérése PowerShell támogatás.](https://blogs.msdn.microsoft.com/sqlsecurity/20../../azure-sql-vulnerability-assessment-now-with-powershell-support/)

## <a name="manage-vulnerability-assessment-baseline-rules-by-using-resource-manager-templates"></a>A biztonsági résfelmérés alapszabályainak kezelése erőforrás-kezelősablonok használatával

A biztonsági rés felmérésének alapkonfigurációinak konfigurálásához `Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines` az Azure Resource Manager-sablonok használatával használja a típust.

Az alaptervek `vulnerabilityAssessments` hozzáadása előtt győződjön meg arról, hogy engedélyezte az SQL Servert futtató számítógépen.

Íme egy példa a VA2065 alapszabály meghatározásához a masterdb és a VA1143 masterdb-hez és a VA1143-hoz a userdb-hez erőforrásként egy Erőforrás-kezelő sablonban:

```json
    "resources": [
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name') , '/default/VA2065/master')]",
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                                "FirewallRuleName3",
                                "StartIpAddress",
                                "EndIpAddress"
                                  ]
                    },{
                         "result": [
                                "FirewallRuleName4",
                                "62.92.15.68",
                                "62.92.15.68"
                            ]
                        
                    }
                ]
            },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA2130/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "dbo"
                        ]
                    }
                ]
            }
        }
    ]
}   
```

A fő adatbázis és a felhasználói adatbázis esetében az erőforrásnevek eltérően vannak definiálva:

* Fő adatbázis - "név": "[concat(parameters('server_name'),'/", parameters('database_name') , "/default/VA2065/<b>master</b>')]",
* Felhasználói adatbázis - "név": "[concat(parameters('server_name'),'/", parameters('database_name') , '/default/VA2065/<b>default</b>')]",
 
 
 Ha a logikai típusokat igaz/hamisként szeretné kezelni, állítsa be az alapkonfiguráció-eredményt az "1"/"0" bináris bemenettel.
 
 ```json
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments/rules/baselines",
            "apiVersion": "2018-06-01-preview",
            "name": "[concat(parameters('server_name'),'/', parameters('database_name'), '/default/VA1143/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers/vulnerabilityAssessments', parameters('server_name'), 'Default')]"
            ],
            "properties": {
                "baselineResults": [
                    {
                        "result": [
                            "1"
                        ]
                    }
                ]
            }
        }
    ]
}   
```
 
 
## <a name="next-steps"></a>További lépések  

- További információ a [speciális adatbiztonságról](sql-database-advanced-data-security.md).
- További információ az [adatok felderítéséről és besorolásáról.](sql-database-data-discovery-and-classification.md)
